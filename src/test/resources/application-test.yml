spring:
  datasource:
    # Testcontainers가 동적으로 설정함
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: create-drop  # 테스트 시작 시 스키마 생성, 종료 시 삭제
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect
        javax.persistence.schema-generation.scripts.action: create
        javax.persistence.schema-generation.scripts.create-target: ""

  sql:
    init:
      mode: always  # data.sql 실행 (View 생성용)
      data-locations: classpath:data.sql

  # View 생성을 위한 추가 설정
  # Hibernate가 테이블 생성 후 data.sql을 실행하도록 함
  jpa:
    defer-datasource-initialization: true

logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.testcontainers: INFO
