# λ¶€ν• ν…μ¤νΈ κ³„νμ„

## 1. κ°μ”

### 1.1 λ©μ 

μ΄μ»¤λ¨Έμ¤ μ„λΉ„μ¤μ ν•µμ‹¬ APIμ— λ€ν•΄ λ¶€ν• ν…μ¤νΈλ¥Ό μν–‰ν•μ—¬:
- μ‹μ¤ν…μ **μ²λ¦¬λ‰ ν•κ³„(TPS)** νμ•…
- **λ³‘λ© μ§€μ ** νƒμƒ‰ λ° κ°μ„ μ  λ„μ¶
- λ™μ‹μ„± μ μ–΄κ°€ κ³ λ¶€ν• μƒν™©μ—μ„λ„ μ •μƒ λ™μ‘ν•λ”μ§€ κ²€μ¦
- μ μ • **μΈν”„λΌ μ¤ν™** μ‚°μ •μ„ μ„ν• κΈ°μ΄ λ°μ΄ν„° ν™•λ³΄

### 1.2 ν…μ¤νΈ λ„κµ¬

| λ„κµ¬ | μ©λ„ |
|------|------|
| **K6** | λ¶€ν• ν…μ¤νΈ μ¤ν¬λ¦½νΈ μ‘μ„± λ° μ‹¤ν–‰ |
| **Prometheus** | λ©”νΈλ¦­ μμ§‘ (CPU, λ©”λ¨λ¦¬, JVM, Redis, Kafka) |
| **Grafana** | λ©”νΈλ¦­ μ‹κ°ν™” λ° λ€μ‹λ³΄λ“ |
| **Docker** | ν…μ¤νΈ ν™κ²½ κµ¬μ„± |

### 1.3 ν…μ¤νΈ ν™κ²½

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                      Test Environment                        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  K6 (Load Generator)                                         β”‚
β”‚       β”‚                                                      β”‚
β”‚       β–Ό                                                      β”‚
β”‚  Spring Boot App (target: localhost:8080)                   β”‚
β”‚       β”‚                                                      β”‚
β”‚       β”β”€β”€ MySQL 8.0 (localhost:3306)                        β”‚
β”‚       β”β”€β”€ Redis 7.2 (localhost:6379)                        β”‚
β”‚       β””β”€β”€ Kafka 7.4 (localhost:9092)                        β”‚
β”‚                                                              β”‚
β”‚  Monitoring:                                                 β”‚
β”‚       β”β”€β”€ Prometheus (localhost:9090)                       β”‚
β”‚       β”β”€β”€ Grafana (localhost:3000)                          β”‚
β”‚       β”β”€β”€ Redis Exporter (localhost:9121)                   β”‚
β”‚       β””β”€β”€ Kafka Exporter (localhost:9308)                   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 2. ν…μ¤νΈ λ€μƒ API

### 2.1 μ„ μ • κΈ°μ¤€

1. **λ™μ‹μ„± μ μ–΄κ°€ ν•„μ”ν• κΈ°λ¥** - λ¶„μ‚°λ½, μλ‰ μ ν•
2. **νΈλν”½ ν­μ¦ κ°€λ¥μ„±** - μ„ μ°©μ μ΄λ²¤νΈ, μΈκΈ° μƒν’
3. **λΉ„μ¦λ‹μ¤ ν•µμ‹¬ κΈ°λ¥** - μ£Όλ¬Έ, κ²°μ 

### 2.2 ν…μ¤νΈ λ€μƒ

| μ°μ„ μμ„ | API | λ©”μ„λ“ | μ—”λ“ν¬μΈνΈ | μ„ μ • μ΄μ  |
|---------|-----|--------|-----------|----------|
| 1 | μ„ μ°©μ μΏ ν° λ°κΈ‰ | POST | `/api/coupons/issue` | λ™μ‹μ„± μ μ–΄ ν•µμ‹¬, Redis+Kafka μ΅°ν•© |
| 2 | μƒν’ μ£Όλ¬Έ μƒμ„± | POST | `/api/orders` | μ¬κ³  μ°¨κ° + λ¶„μ‚°λ½ |
| 3 | μ£Όλ¬Έ κ²°μ  | POST | `/api/orders/{id}/payment` | ν¬μΈνΈ+μΏ ν°+μ¬κ³  ν†µν•© μ²λ¦¬ |
| 4 | μΈκΈ° μƒν’ μ΅°ν | GET | `/api/products/popular` | μΊμ‹ ν¨κ³Ό κ²€μ¦ |
| 5 | ν¬μΈνΈ μ¶©μ „ | POST | `/api/points/charge` | λ¶„μ‚°λ½ κ²½ν•© |

---

## 3. ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### 3.1 μ‹λ‚λ¦¬μ¤ 1: μ„ μ°©μ μΏ ν° λ°κΈ‰ (Peak Test)

**λ©μ **: μ„ μ°©μ μΏ ν° λ°κΈ‰ μ‹ λ™μ‹μ„± μ μ–΄ λ° μ²λ¦¬λ‰ κ²€μ¦

**μ‹λ‚λ¦¬μ¤ μ„¤μ •**:
```
- μΏ ν° μλ‰: 500κ°
- λ™μ‹ μ‚¬μ©μ: 10,000λ…
- λ©ν‘: μ •ν™•ν 500λ…λ§ λ°κΈ‰ μ„±κ³µ, λ‚λ¨Έμ§€ μ‹¤ν¨
```

**λ¶€ν• ν¨ν„΄**:
```
VUs (Virtual Users)
  β”‚
10Kβ”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  β”‚        β•±              β•²
5K β”β”€β”€β”€β”€β”€β”€β”€β•±                β•²β”€β”€β”€β”€β”€β”€
  β”‚      β•±                    β•²
  β”‚     β•±                      β•²
0 β”β”€β”€β”€β”€β•±β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β•²β”€β”€β”€β”€
  0   10s   30s          90s   120s
       β†‘     β†‘            β†‘
    ramp-up peak      ramp-down
```

**κ²€μ¦ ν•­λ©**:
- [ ] λ°κΈ‰ μ„±κ³µ μ = μΏ ν° μλ‰ (μ •ν™•ν 500κ°)
- [ ] μ¤‘λ³µ λ°κΈ‰ 0κ±΄
- [ ] P99 μ‘λ‹µμ‹κ°„ < 3μ΄
- [ ] μ—λ¬μ¨ (SOLD_OUT μ μ™Έ) < 1%

---

### 3.2 μ‹λ‚λ¦¬μ¤ 2: μƒν’ μ£Όλ¬Έ μƒμ„± (Load Test)

**λ©μ **: μ¬κ³  μ°¨κ° μ‹ λ™μ‹μ„± μ μ–΄ λ° TPS ν•κ³„ μΈ΅μ •

**μ‹λ‚λ¦¬μ¤ μ„¤μ •**:
```
- μƒν’ μ¬κ³ : 1,000κ°
- λ™μ‹ μ‚¬μ©μ: 2,000λ…
- μ£Όλ¬Έ μλ‰: κ° 1κ°μ”©
- λ©ν‘: 1,000λ… μ„±κ³µ, 1,000λ… μ¬κ³  λ¶€μ΅± μ‹¤ν¨
```

**λ¶€ν• ν¨ν„΄**:
```
VUs
  β”‚
2K β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  β”‚      β•±                   β•²
1Kβ”β”€β”€β”€β”€β”€β•±                     β•²β”€β”€β”€β”€
  β”‚    β•±                       β•²
0 β”β”€β”€β”€β•±β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β•²β”€β”€
  0  30s                    180s 210s
```

**κ²€μ¦ ν•­λ©**:
- [ ] μµμΆ… μ¬κ³  = 0 (μμ μ• λ¨)
- [ ] μ„±κ³µ μ£Όλ¬Έ μ = μ΄κΈ° μ¬κ³ 
- [ ] P95 μ‘λ‹µμ‹κ°„ < 2μ΄
- [ ] λ°λ“λ½ λ°μƒ 0κ±΄

---

### 3.3 μ‹λ‚λ¦¬μ¤ 3: μ£Όλ¬Έ κ²°μ  (Stress Test)

**λ©μ **: κ²°μ  ν”„λ΅μ„Έμ¤ μ „μ²΄ νλ¦„μ μ•μ •μ„± κ²€μ¦

**μ‹λ‚λ¦¬μ¤ μ„¤μ •**:
```
- μ‚¬μ „ μ΅°κ±΄: μ£Όλ¬Έ 1,000κ±΄ μƒμ„± μ™„λ£
- λ™μ‹ κ²°μ  μ”μ²­: μ μ§„μ  μ¦κ°€ (100 β†’ 500 β†’ 1,000)
- ν¬μΈνΈ μ‚¬μ© + μΏ ν° μ μ© νΌν•©
```

**λ¶€ν• ν¨ν„΄**:
```
VUs
  β”‚                        1000
1Kβ”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  β”‚                 β•±
500β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β•±
  β”‚        β•±       β”‚
100β”β”€β”€β”€β”€β”€β”€β”€β”€β•±β”€β”€β”€β”€β”€β”€β”€β”€β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  β”‚   β•±    β”‚       β”‚
0 β”β”€β”€β•±β”€β”€β”€β”€β”€β”‚β”€β”€β”€β”€β”€β”€β”€β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  0  60s  120s   180s      300s
```

**κ²€μ¦ ν•­λ©**:
- [ ] ν¬μΈνΈ μ •ν•©μ„± μ μ§€
- [ ] μΏ ν° μ¤‘λ³µ μ‚¬μ© 0κ±΄
- [ ] λ³΄μƒ νΈλμ­μ… μ •μƒ λ™μ‘
- [ ] TPS ν•κ³„μ  μΈ΅μ •

---

### 3.4 μ‹λ‚λ¦¬μ¤ 4: μΈκΈ° μƒν’ μ΅°ν (Load Test)

**λ©μ **: μΊμ‹ ν¨κ³Ό λ° Cache Stampede λ°©μ§€ κ²€μ¦

**μ‹λ‚λ¦¬μ¤ μ„¤μ •**:
```
Case A: μΊμ‹ ν™μ„±ν™” (Redis + Caffeine)
Case B: μΊμ‹ λΉ„ν™μ„±ν™” (DB μ§μ ‘ μ΅°ν)
λ™μ‹ μ‚¬μ©μ: 1,000λ…
μ§€μ† μ‹κ°„: 3λ¶„
```

**κ²€μ¦ ν•­λ©**:
- [ ] Case A vs B μ‘λ‹µμ‹κ°„ λΉ„κµ
- [ ] Cache Hit Rate > 95%
- [ ] DB μΏΌλ¦¬ μ λΉ„κµ
- [ ] P99 μ‘λ‹µμ‹κ°„ λΉ„κµ

---

### 3.5 μ‹λ‚λ¦¬μ¤ 5: ν¬μΈνΈ λ™μ‹ μ¶©μ „ (Stress Test)

**λ©μ **: κ°™μ€ μ‚¬μ©μμ— λ€ν• λ™μ‹ μ”μ²­ μ‹ μ •ν•©μ„± κ²€μ¦

**μ‹λ‚λ¦¬μ¤ μ„¤μ •**:
```
- μ‚¬μ©μ 100λ…
- κ° μ‚¬μ©μλ‹Ή λ™μ‹ μ¶©μ „ μ”μ²­ 10κ±΄ (μ΄ 1,000κ±΄)
- μ¶©μ „ κΈμ•΅: 1,000μ›μ”©
- κΈ°λ€ κ²°κ³Ό: κ° μ‚¬μ©μ μ”μ•΅ = μ΄κΈ° + 10,000μ›
```

**κ²€μ¦ ν•­λ©**:
- [ ] μµμΆ… ν¬μΈνΈ μ”μ•΅ μ •ν•©μ„±
- [ ] ν¬μΈνΈ μ΄λ ¥ λ„λ½ 0κ±΄
- [ ] λ¶„μ‚°λ½ κ²½ν•©μΌλ΅ μΈν• μ‹¤ν¨ λΉ„μ¨

---

## 4. μ„±λ¥ μ§€ν‘ (SLI/SLO)

### 4.1 λ©ν‘ μ§€ν‘

| μ§€ν‘ | λ©ν‘κ°’ | μΈ΅μ • λ°©λ²• |
|------|--------|----------|
| **TPS** | > 500 req/s | K6 metrics |
| **P50 μ‘λ‹µμ‹κ°„** | < 100ms | K6 http_req_duration |
| **P95 μ‘λ‹µμ‹κ°„** | < 500ms | K6 http_req_duration |
| **P99 μ‘λ‹µμ‹κ°„** | < 2,000ms | K6 http_req_duration |
| **μ—λ¬μ¨** | < 1% (λΉ„μ¦λ‹μ¤ μ¤λ¥ μ μ™Έ) | K6 http_req_failed |
| **CPU μ‚¬μ©λ¥ ** | ν‰μƒμ‹ < 50% | Prometheus |
| **λ©”λ¨λ¦¬ μ‚¬μ©λ¥ ** | < 80% | Prometheus |
| **Redis λ…λ Ή μ²λ¦¬λ‰** | λ¨λ‹ν„°λ§ | Redis Exporter |
| **Kafka Consumer Lag** | < 1,000 | Kafka Exporter |

### 4.2 μ„κ³„μΉ μ•λ κΈ°μ¤€

| μ§€ν‘ | Warning | Critical |
|------|---------|----------|
| CPU | > 70% | > 90% |
| Memory | > 70% | > 85% |
| P99 Latency | > 3s | > 5s |
| Error Rate | > 1% | > 5% |
| Kafka Lag | > 5,000 | > 10,000 |

---

## 5. ν…μ¤νΈ μ‹¤ν–‰ κ³„ν

### 5.1 μ‚¬μ „ μ¤€λΉ„

1. **ν…μ¤νΈ λ°μ΄ν„° μ…‹μ—…**
   - μ‚¬μ©μ 10,000λ… μƒμ„±
   - μƒν’ 10μΆ… (μ¬κ³  κ° 1,000κ°)
   - μΏ ν° 5μΆ… (μλ‰ κ° 500κ°)
   - κ° μ‚¬μ©μ ν¬μΈνΈ 100,000μ›

2. **λ¨λ‹ν„°λ§ ν™κ²½ κµ¬μ„±**
   - Prometheus + Grafana μ‹¤ν–‰
   - Redis Exporter, Kafka Exporter μ—°λ™
   - JVM λ©”νΈλ¦­ λ…Έμ¶ (Actuator)

3. **K6 μ¤ν¬λ¦½νΈ κ²€μ¦**
   - μ†κ·λ¨ (VU=10) ν…μ¤νΈλ΅ μ¤ν¬λ¦½νΈ λ™μ‘ ν™•μΈ

### 5.2 μ‹¤ν–‰ μμ„

| λ‹¨κ³„ | μ‹λ‚λ¦¬μ¤ | μμƒ μ†μ” |
|------|----------|----------|
| 1 | μΈκΈ° μƒν’ μ΅°ν (μ›λ°μ—…) | 5λ¶„ |
| 2 | ν¬μΈνΈ μ¶©μ „ | 10λ¶„ |
| 3 | μƒν’ μ£Όλ¬Έ μƒμ„± | 10λ¶„ |
| 4 | μ£Όλ¬Έ κ²°μ  | 15λ¶„ |
| 5 | **μ„ μ°©μ μΏ ν° λ°κΈ‰** | 10λ¶„ |

### 5.3 κ²°κ³Ό μμ§‘

- K6 Summary λ¦¬ν¬νΈ
- Grafana λ€μ‹λ³΄λ“ μ¤ν¬λ¦°μƒ·
- λ³‘λ© κµ¬κ°„ λ¶„μ„ λ΅κ·Έ
- κ°μ„  μ „/ν›„ λΉ„κµ λ°μ΄ν„°

---

## 6. λ³‘λ© μμƒ μ§€μ 

### 6.1 μμƒ λ³‘λ©

| κµ¬κ°„ | μμƒ μ›μΈ | ν™•μΈ λ°©λ²• |
|------|----------|----------|
| λ¶„μ‚°λ½ λ€κΈ° | Redisson Lock κ²½ν•© | Lock νλ“ λ€κΈ°μ‹κ°„ λ΅κ·Έ |
| DB μ»¤λ„¥μ… | HikariCP ν’€ μ†μ§„ | Hikari λ©”νΈλ¦­ |
| Redis μ²λ¦¬λ‰ | λ‹¨μΌ μ¤λ λ“ ν•κ³„ | Redis INFO stats |
| Kafka Consumer | μ²λ¦¬ μ†λ„ < λ°ν–‰ μ†λ„ | Consumer Lag |
| GC Pause | ν™ λ©”λ¨λ¦¬ λ¶€μ΅± | GC λ΅κ·Έ |

### 6.2 λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“ κµ¬μ„±

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  K6 Performance Dashboard                                    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  [ TPS ]  [ Response Time (P50/P95/P99) ]  [ Error Rate ]   β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  JVM Metrics                                                 β”‚
β”‚  [ Heap Usage ]  [ GC Pause ]  [ Thread Count ]             β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  Infrastructure                                              β”‚
β”‚  [ CPU ]  [ Memory ]  [ Network I/O ]                       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  Redis Metrics                                               β”‚
β”‚  [ Commands/sec ]  [ Memory ]  [ Connected Clients ]        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  Kafka Metrics                                               β”‚
β”‚  [ Messages/sec ]  [ Consumer Lag ]  [ Partition Count ]    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 7. μ°Έκ³  μλ£

- [K6 Documentation](https://k6.io/docs/)
- [Prometheus + Grafana μ„¤μ • κ°€μ΄λ“](https://prometheus.io/docs/)
- [Redis Exporter](https://github.com/oliver006/redis_exporter)
- [Kafka Exporter](https://github.com/danielqsj/kafka_exporter)
- ν”„λ΅μ νΈ λ¬Έμ„: `07_CONCURRENCY_PROBLEM_ANALYSIS.md`, `08_DISTRIBUTED_LOCK_AND_CACHING_REPORT.md`

---

## 8. ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό

### 8.1 μ‹λ‚λ¦¬μ¤ 1: μ„ μ°©μ μΏ ν° λ°κΈ‰ μ¤νμ΄ν¬ ν…μ¤νΈ

**ν…μ¤νΈ μΌμ‹**: 2025-12-26

**ν…μ¤νΈ κµ¬μ„±**:
- λ°±κ·ΈλΌμ΄λ“ νΈλν”½: 30 VUs, μƒν’ μ΅°ν API μ§€μ† νΈμ¶ (2λ¶„κ°„)
- μΏ ν° μ¤νμ΄ν¬: 30μ΄ ν›„ μ‹μ‘, 5μ΄ λ§μ— 500β†’1000 VUs ν­μ¦
- μΏ ν° μλ‰ μ ν•: 500κ°

**ν…μ¤νΈ κ²°κ³Ό**:

| κµ¬λ¶„ | λ©”νΈλ¦­ | κ²°κ³Ό |
|------|--------|------|
| **λ°±κ·ΈλΌμ΄λ“ νΈλν”½** | μ„±κ³µ μ”μ²­ | 2,601κ±΄ |
| | μ‹¤ν¨ μ”μ²­ | 0κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 5,487ms |
| **μΏ ν° μ¤νμ΄ν¬** | λ°κΈ‰ μ„±κ³µ | 500κ±΄ β… (μ •ν™•ν μ ν• μλ‰) |
| | ν’μ  κ±°λ¶€ | - |
| | P95 μ‘λ‹µμ‹κ°„ | 8,221ms |

**λ¶„μ„**:
- β… **λ™μ‹μ„± μ μ–΄ μ„±κ³µ**: μΏ ν° 500κ° μ •ν™•ν λ°κΈ‰, μ΄κ³Ό λ°κΈ‰ μ—†μ
- β οΈ **λ‹¤λ¥Έ API μν–¥**: μ¤νμ΄ν¬ μ¤‘ λ°±κ·ΈλΌμ΄λ“ API P95κ°€ 5,487msλ΅ κΈ‰μ¦
  - ν‰μƒμ‹ λ€λΉ„ μ•½ 10λ°° μ΄μƒ μ‘λ‹µ μ§€μ—° λ°μƒ
  - μ›μΈ: λ™μΌ μ„λ²„ μμ› κ²½ν•© (CPU, DB μ»¤λ„¥μ…, Redis)
- π“ **μ²λ¦¬λ‰**: μ•½ 2λ¶„κ°„ μ΄ 3,101κ±΄ μ΄μƒ μ²λ¦¬

**κ°μ„  ν•„μ” μ‚¬ν•­**:
1. μΏ ν° λ°κΈ‰ APIμ™€ μΌλ° API κ°„ μμ› κ²©λ¦¬ κ³ λ ¤
2. Rate Limiting μ μ©μΌλ΅ μ¤νμ΄ν¬ μ™„ν™”
3. μΏ ν° λ°κΈ‰ μ „μ© μ¤λ λ“ ν’€ λ¶„λ¦¬ κ²€ν† 

---

### 8.2 μ‹λ‚λ¦¬μ¤ 2: μ£Όλ¬Έ μƒμ„± λ¶€ν• ν…μ¤νΈ

**ν…μ¤νΈ μΌμ‹**: 2025-12-26

**ν…μ¤νΈ κµ¬μ„±**:
- λ°±κ·ΈλΌμ΄λ“ νΈλν”½: 20 VUs, μƒν’ μ΅°ν API μ§€μ† νΈμ¶ (2λ¶„ 30μ΄κ°„)
- μ£Όλ¬Έ λ¶€ν•: 20μ΄ ν›„ μ‹μ‘, 100β†’300β†’500 VUs μ μ§„μ  μ¦κ°€
- ν…μ¤νΈ μ‹κ°„: μ•½ 2λ¶„ 30μ΄

**ν…μ¤νΈ κ²°κ³Ό**:

| κµ¬λ¶„ | λ©”νΈλ¦­ | κ²°κ³Ό |
|------|--------|------|
| **λ°±κ·ΈλΌμ΄λ“ νΈλν”½** | μ„±κ³µ μ”μ²­ | 5,745κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 79ms |
| **μ£Όλ¬Έ νΈλν”½** | μ£Όλ¬Έ μ„±κ³µ | 0κ±΄ β |
| | μ¬κ³  λ¶€μ΅± | 0κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 1,905ms |
| **μ „μ²΄** | μ΄ μ”μ²­ | 56,356κ±΄ |
| | μ‹¤ν¨μ¨ | 89.81% |

**λ¶„μ„**:
- β **μ„λ²„ λ‹¤μ΄**: μ•½ 300 VUs λ„λ‹¬ μ‹μ μ—μ„ μ„λ²„ κ³Όλ¶€ν•λ΅ λ‹¤μ΄
  - `connection reset by peer` μ—λ¬ λ‹¤μ λ°μƒ
  - μ£Όλ¬Έ API μ „μ²΄ μ‹¤ν¨
- β… **λ°±κ·ΈλΌμ΄λ“ API κ²©λ¦¬**: μ„λ²„ λ‹¤μ΄ μ „κΉμ§€ λ°±κ·ΈλΌμ΄λ“ APIλ” μ •μƒ λ™μ‘ (P95: 79ms)
- β οΈ **μ²λ¦¬λ‰ ν•κ³„**: ν„μ¬ κµ¬μ„±μΌλ΅ μ•½ 300λ… λ™μ‹ μ£Όλ¬Έμ΄ ν•κ³„μ 

**λ³‘λ© λ¶„μ„**:
1. **DB μ»¤λ„¥μ… ν’€ μ†μ§„**: λ™μ‹ μ£Όλ¬Έ μ²λ¦¬ μ‹ HikariCP μ»¤λ„¥μ… ν’€ κ³ κ°
2. **λ¶„μ‚°λ½ κ²½ν•©**: μ¬κ³  μ°¨κ° μ‹ Redis λ¶„μ‚°λ½ λ€κΈ°
3. **Tomcat μ¤λ λ“ ν’€**: κΈ°λ³Έ 200 μ¤λ λ“ μ΄κ³Ό μ”μ²­ μ²λ¦¬ λ¶κ°€

**κ°μ„  ν•„μ” μ‚¬ν•­**:
1. HikariCP μµλ€ μ»¤λ„¥μ… μ μ¦κ°€ κ²€ν† 
2. Tomcat μ¤λ λ“ ν’€ ν¬κΈ° μ΅°μ •
3. μ¬κ³  μ°¨κ° λ΅μ§ μµμ ν™” (λ°°μΉ μ²λ¦¬ λλ” λΉ„λ™κΈ° μ²λ¦¬)
4. Circuit Breaker ν¨ν„΄ μ μ©μΌλ΅ λ¶€λ¶„ μ‹¤ν¨ λ°©μ§€

---

### 8.3 μ‹λ‚λ¦¬μ¤ 3: μΈκΈ° μƒν’ μ΅°ν λ¶€ν• ν…μ¤νΈ

**ν…μ¤νΈ μΌμ‹**: 2025-12-26

**ν…μ¤νΈ κµ¬μ„±**:
- λ°±κ·ΈλΌμ΄λ“ νΈλν”½: 30 VUs, μΌλ° μƒν’ μ΅°ν API νΈμ¶ (1λ¶„ 30μ΄)
- μΈκΈ° μƒν’ μ΅°ν: 10μ΄ ν›„ μ‹μ‘, 100β†’300 VUs μ μ§„μ  μ¦κ°€
- ν…μ¤νΈ μ‹κ°„: μ•½ 1λ¶„ 30μ΄

**ν…μ¤νΈ κ²°κ³Ό**:

| κµ¬λ¶„ | λ©”νΈλ¦­ | κ²°κ³Ό |
|------|--------|------|
| **λ°±κ·ΈλΌμ΄λ“ νΈλν”½** | μ„±κ³µ μ”μ²­ | 5,427κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 136ms β… |
| **μΈκΈ° μƒν’ μ΅°ν** | μ„±κ³µ | 0κ±΄ β |
| | μ‹¤ν¨ | 33,943κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 798ms |
| | μΊμ‹ ννΈμ¨ | 0% |
| **μ „μ²΄** | μ΄ μ”μ²­ | 39,391κ±΄ |
| | μ‹¤ν¨μ¨ | 86.22% |
| | TPS | 434 req/s |

**λ¶„μ„**:
- β **μΈκΈ° μƒν’ API μ¤λ¥**: `/api/products/popular` μ—”λ“ν¬μΈνΈ 500 μ—λ¬ λ°ν™
  - μ‘λ‹µ: `{"success":false,"code":"COMMON_1500","message":"μ„λ²„ λ‚΄λ¶€ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤."}`
  - μ›μΈ: μΈκΈ° μƒν’ μ§‘κ³„ λ΅μ§ λλ” μΊμ‹ μ„¤μ • λ¬Έμ  μ¶”μ •
- β… **λ°±κ·ΈλΌμ΄λ“ API μ •μƒ**: μΈκΈ° μƒν’ API μ¤λ¥μ—λ„ μΌλ° μƒν’ μ΅°νλ” μ •μƒ λ™μ‘ (P95: 136ms)
- π“ **μ²λ¦¬λ‰**: 434 TPSλ΅ λ†’μ€ μ²λ¦¬λ‰ κΈ°λ΅ (λ€λ¶€λ¶„ μ—λ¬ μ‘λ‹µ)

**κ°μ„  ν•„μ” μ‚¬ν•­**:
1. μΈκΈ° μƒν’ API μ¤λ¥ μ›μΈ λ¶„μ„ λ° μμ •
2. μΊμ‹ μ„¤μ • κ²€μ¦ (Redis/Caffeine)
3. μΈκΈ° μƒν’ μ§‘κ³„ μΏΌλ¦¬ μµμ ν™”

---

### 8.4 μ‹λ‚λ¦¬μ¤ 4: ν¬μΈνΈ λ™μ‹ μ¶©μ „ μ¤νΈλ μ¤ ν…μ¤νΈ

**ν…μ¤νΈ μΌμ‹**: 2025-12-26

**ν…μ¤νΈ κµ¬μ„±**:
- λ°±κ·ΈλΌμ΄λ“ νΈλν”½: 20 VUs, μƒν’ μ΅°ν API νΈμ¶ (1λ¶„ 30μ΄)
- ν¬μΈνΈ μ¶©μ „: 10μ΄ ν›„ μ‹μ‘, 50β†’100 VUs μ μ§„μ  μ¦κ°€
- λ™μΌ μ‚¬μ©μ(userId 1~20) λ€μƒ λ™μ‹ μ¶©μ „μΌλ΅ λ½ κ²½ν•© μ λ„
- ν…μ¤νΈ μ‹κ°„: μ•½ 1λ¶„ 30μ΄

**ν…μ¤νΈ κ²°κ³Ό**:

| κµ¬λ¶„ | λ©”νΈλ¦­ | κ²°κ³Ό |
|------|--------|------|
| **λ°±κ·ΈλΌμ΄λ“ νΈλν”½** | μ„±κ³µ μ”μ²­ | 3,380κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 86ms β… |
| **ν¬μΈνΈ μ¶©μ „** | μ„±κ³µ | 0κ±΄ β |
| | μ‹¤ν¨ | 23,167κ±΄ |
| | λ½ κ²½ν•© μ‹¤ν¨ | 0κ±΄ |
| | P95 μ‘λ‹µμ‹κ°„ | 61ms |
| **μ „μ²΄** | μ΄ μ”μ²­ | 26,547κ±΄ |
| | μ‹¤ν¨μ¨ | 87.26% |
| | TPS | 293 req/s |

**λ¶„μ„**:
- β **ν¬μΈνΈ μ¶©μ „ API μ¤λ¥**: `/api/points/charge` μ—”λ“ν¬μΈνΈ 500 μ—λ¬ λ°ν™
  - μ‘λ‹µ: `{"success":false,"code":"COMMON_1500","message":"μ„λ²„ λ‚΄λ¶€ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤."}`
  - μ›μΈ: ν¬μΈνΈ μ¶©μ „ λ΅μ§ λλ” λ¶„μ‚°λ½ μ„¤μ • λ¬Έμ  μ¶”μ •
- β… **λ°±κ·ΈλΌμ΄λ“ API μ •μƒ**: ν¬μΈνΈ API μ¤λ¥μ—λ„ μƒν’ μ΅°νλ” μ •μƒ λ™μ‘ (P95: 86ms)
- π“ **API κ²©λ¦¬ ν™•μΈ**: νΉμ • API μ¤λ¥κ°€ λ‹¤λ¥Έ APIμ— μν–¥ λ―ΈμΉμ§€ μ•μ

**κ°μ„  ν•„μ” μ‚¬ν•­**:
1. ν¬μΈνΈ μ¶©μ „ API μ¤λ¥ μ›μΈ λ¶„μ„ λ° μμ •
2. λ¶„μ‚°λ½ μ„¤μ • κ²€μ¦ (Redisson)
3. ν¬μΈνΈ νΈλμ­μ… λ΅μ§ κ²€ν† 

---

## 9. λ¶€ν• ν…μ¤νΈ μΆ…ν•© κ²°κ³Ό

### 9.1 ν…μ¤νΈ μ”μ•½

| μ‹λ‚λ¦¬μ¤ | μƒνƒ | λ°±κ·ΈλΌμ΄λ“ P95 | μ£Όμ” λ°κ²¬ |
|----------|------|---------------|-----------|
| 1. μΏ ν° μ¤νμ΄ν¬ | β οΈ | 5,487ms | λ™μ‹μ„± μ μ–΄ μ„±κ³µ, λ‹¤λ¥Έ API μν–¥ λ°μƒ |
| 2. μ£Όλ¬Έ λ¶€ν• | β | 79ms (λ‹¤μ΄ μ „) | 300 VUμ—μ„ μ„λ²„ λ‹¤μ΄ |
| 3. μΈκΈ° μƒν’ | β | 136ms | API 500 μ—λ¬ |
| 4. ν¬μΈνΈ μ¶©μ „ | β | 86ms | API 500 μ—λ¬ |

### 9.2 λ°κ²¬λ λ¬Έμ μ 

1. **μ„λ²„ μ•μ •μ„±**
   - λ™μ‹ μ£Όλ¬Έ 300λ… μμ¤€μ—μ„ μ„λ²„ λ‹¤μ΄ λ°μƒ
   - μ»¤λ„¥μ… ν’€, μ¤λ λ“ ν’€ ν•κ³„ λ„λ‹¬

2. **API μ¤λ¥**
   - μΈκΈ° μƒν’ μ΅°ν API: 500 μ—λ¬
   - ν¬μΈνΈ μ¶©μ „ API: 500 μ—λ¬

3. **μμ› κ²©λ¦¬**
   - μ¤νμ΄ν¬ μ‹ λ‹¤λ¥Έ API μ‘λ‹µμ‹κ°„ μν–¥ (μµλ€ 10λ°° μ¦κ°€)

### 9.3 κΈμ •μ  λ°κ²¬

1. **λ™μ‹μ„± μ μ–΄**: μΏ ν° 500κ° μ •ν™•ν λ°κΈ‰ (μ΄κ³Ό λ°κΈ‰ μ—†μ)
2. **API κ²©λ¦¬**: νΉμ • API μ¤λ¥κ°€ λ‹¤λ¥Έ APIμ— μ „νλμ§€ μ•μ
3. **μ—λ¬ μ²λ¦¬**: μ¤λ¥ λ°μƒ μ‹μ—λ„ λΉ λ¥Έ μ‘λ‹µ (P95 < 100ms)

### 9.4 κ¶μ¥ κ°μ„  μ‚¬ν•­

| μ°μ„ μμ„ | ν•­λ© | μ„¤λ… |
|----------|------|------|
| 1 | API λ²„κ·Έ μμ • | μΈκΈ° μƒν’, ν¬μΈνΈ μ¶©μ „ API μ¤λ¥ ν•΄κ²° |
| 2 | μ»¤λ„¥μ… ν’€ νλ‹ | HikariCP μµλ€ μ»¤λ„¥μ… μ μ¦κ°€ |
| 3 | μ¤λ λ“ ν’€ νλ‹ | Tomcat μ¤λ λ“ ν’€ ν¬κΈ° μ΅°μ • |
| 4 | Rate Limiting | μ¤νμ΄ν¬ μ™„ν™”λ¥Ό μ„ν• μ”μ²­ μ ν• |
| 5 | Circuit Breaker | μ¥μ•  μ „ν λ°©μ§€ ν¨ν„΄ μ μ© |
